
    <div align="center" *ngIf="!isloaded()">
        <mat-spinner color="warn" diameter="50"></mat-spinner>
    </div> 


    <mat-progress-bar mode="query"  color="warn" style="padding:0 ; margin-left:0; margin-right:0 ; margin-top: 0; margin-bottom:10px ;width: 100%" *ngIf="isSubmit" ></mat-progress-bar>

    <form *ngIf="isloaded()" (keydown.enter)="$event.preventDefault()">

    <mat-dialog-content>

        <div class="row">

            <div class="col-md-2">
                    <img class="img" [src]="this.imageUrl" class="image-cover"/>
            </div>
    
            <div class="col-md-2" style="margin-top: 50px">
                <mat-form-field class="example-full-width">
                 <input matInput autocomplete="off" [formControl]="employeeIDControl"  placeholder="Employee #" [readonly]="!CreateMode"  [value]="employee.employeeID">
                 </mat-form-field>
             </div>

            <div class="col-md-3" style="margin-top: 50px" >
              <mat-form-field class="example-full-width">
                  <input  matInput autocomplete="off" [formControl]="nameControl"  placeholder="Name">
                </mat-form-field>
            </div>
            <div class="col-md-3" style="margin-top: 50px">
                <mat-form-field class="example-full-width">
                  <input  matInput autocomplete="off" [formControl]="surnameControl"  placeholder="Surname">
                </mat-form-field>
            </div>
            <div class="col-md-2" style="margin-top: 50px">
                <mat-form-field class="example-full-width">
                  <input matInput autocomplete="off" [formControl]="technicalIDControl"  placeholder="Technical ID">
                </mat-form-field>
            </div>
        </div>

        <div class="row" style="margin-top: 10px">

                <div class="col-md-2">
                  <mat-form-field class="example-full-width">
                        <input type="text"  (dblclick)="setupFilters()" [formControl]="localPlusControl" matInput placeholder="Staff Typology" [matAutocomplete]="autoLocalPlus">
                        <mat-autocomplete  #autoLocalPlus="matAutocomplete" >
                                <mat-option *ngFor="let item of filter_localPlus | async" [value]="item">
                                  {{item}}
                                </mat-option>
                        </mat-autocomplete>
                    </mat-form-field>
                </div>
                <div class="col-md-3">
                    <mat-form-field class="example-full-width">
                            <input type="text" (dblclick)="setupFilters()" [formControl]="workinglocationControl" matInput placeholder="Working Location" [matAutocomplete]="autoworkingLocation">
                            <mat-autocomplete  #autoworkingLocation="matAutocomplete" >
                                    <mat-option *ngFor="let item of filter_workinglocation | async" [value]="item">
                                      {{item}}
                                    </mat-option>
                            </mat-autocomplete>
                            </mat-form-field>
                </div>
                <div class="col-md-3">
                    <mat-form-field class="example-full-width">
                            <input type="text" (dblclick)="setupFilters()" [formControl]="employeecategoryControl" matInput placeholder="Employee Cat." [matAutocomplete]="autoemployeeCategory">
                            <mat-autocomplete  #autoemployeeCategory="matAutocomplete" >
                                    <mat-option *ngFor="let item of filter_employeecategory | async" [value]="item">
                                      {{item}}
                                    </mat-option>
                            </mat-autocomplete>
                    </mat-form-field>
                </div>
                <div class="col-md-4">
                    <mat-form-field class="example-full-width">
                            <input type="text" (dblclick)="setupFilters()" [formControl]="organizationunitControl" matInput placeholder="Organization Unit" [matAutocomplete]="autoorganizationUnit">
                            <mat-autocomplete  #autoorganizationUnit="matAutocomplete" >
                                    <mat-option *ngFor="let item of filter_organizationunit| async" [value]="item">
                                      {{item}}
                                    </mat-option>
                            </mat-autocomplete>
                  </mat-form-field>
                  </div>

            </div>
            <div class="row" style="margin-top: 10px">
                    <div class="col-md-5">
                        <mat-form-field class="example-full-width">
                                <input type="text" (dblclick)="setupFilters()" [formControl]="costcentreControl" matInput placeholder="Cost Centre" [matAutocomplete]="autocostCentre">
                                <mat-autocomplete  #autocostCentre="matAutocomplete" >
                                        <mat-option *ngFor="let item of filter_costcentre| async" [value]="item">
                                          {{item}}
                                        </mat-option>
                                </mat-autocomplete>
                        </mat-form-field>
                    </div>
                    <div class="col-md-7">
                        <mat-form-field class="example-full-width">
                                <input type="text" (dblclick)="setupFilters()" [formControl]="positionControl" matInput placeholder="Position" [matAutocomplete]="autoposition">
                                <mat-autocomplete  #autoposition="matAutocomplete" >
                                        <mat-option *ngFor="let item of filter_position | async" [value]="item">
                                          {{item}}
                                        </mat-option>
                                </mat-autocomplete>
                        </mat-form-field>
                    </div>
             </div>


            <div class="row" style="margin-top: 10px">
                    <div class="col-md-4">
                      <mat-form-field class="example-full-width">
                            <input type="text" (dblclick)="setupFilters()" [formControl]="professionalareaControl" matInput placeholder="Professional Area" [matAutocomplete]="autoprofessionalArea">
                            <mat-autocomplete  #autoprofessionalArea="matAutocomplete" >
                                    <mat-option *ngFor="let item of filter_professionalarea | async" [value]="item">
                                      {{item}}
                                    </mat-option>
                            </mat-autocomplete>
                    </mat-form-field>
                    </div>
                    <div class="col-md-3">
                        <mat-form-field class="example-full-width">
                                <input matInput autocomplete="off" #comapnyhiringdate [formControl]="companyHiringDateControl"  [matDatepicker]="myDatepicker"
                                placeholder="Company Hiring Date" [value]="employee.companyHiringDate">
                            <mat-datepicker-toggle matSuffix
                                                   [for]="myDatepicker">
                            </mat-datepicker-toggle>
                            <mat-datepicker #myDatepicker></mat-datepicker>
                        </mat-form-field>
                    </div>
                    <div class="col-md-2">
                        <mat-form-field class="example-full-width">
                            <input matInput placeholder="Years in Eni"  [value]="today | amDifference: comapnyhiringdate.value :'years' : true | number : '1.0-0'" disabled >
                          </mat-form-field>
                      </div>
                    <div class="col-md-3">
                        <mat-form-field class="example-full-width">
                                <input type="text" autocomplete="off" [formControl]="homecompanyControl" matInput placeholder="Home Company" [matAutocomplete]="autohomeCompany">
                                <mat-autocomplete  #autohomeCompany="matAutocomplete" >
                                        <mat-option *ngFor="let item of filter_homecompany | async" [value]="item">
                                          {{item}}
                                        </mat-option>
                                </mat-autocomplete>
                        </mat-form-field>
                    </div>
             </div>
           
             <div class="row" style="margin-top: 10px">

                    <div class="col-md-1">
                        <mat-form-field class="example-full-width">
                                <mat-select (dblclick)="setupFilters()" [formControl]="genderControl" [matTooltip]="genderControl.value? '': 'Gender'" placeholder="Gender">
                                        <mat-option *ngFor="let item of gender" [value]="item">
                                          {{item}}
                                        </mat-option>
                                </mat-select>                      
                              </mat-form-field>
                    </div>
                    <div class="col-md-2">
                        <mat-form-field class="example-full-width">
                                <input matInput autocomplete="off"  #birthdate [formControl]="birthDateControl"  [matDatepicker]="myDatepicker2"
                                placeholder="Birth Date" >
                    
                            <mat-datepicker-toggle matSuffix
                                                   [for]="myDatepicker2">
                    
                            </mat-datepicker-toggle>
                    
                            <mat-datepicker #myDatepicker2></mat-datepicker>

                        </mat-form-field>
                    </div>
                    <div class="col-md-1">
                            <mat-form-field class="example-full-width">
                              <input matInput autocomplete="off" placeholder="Age" [value]="today | amDifference: birthdate.value :'years' : true | number : '1.0-0'"  disabled>
                            </mat-form-field>
                     </div>
                     <div class="col-md-2">
                        <mat-form-field class="example-full-width">
                                <input type="text" (dblclick)="setupFilters()" [formControl]="countryofbirthControl" matInput placeholder="Country of Birth"  [matAutocomplete]="autocountryOfBirth">
                                <mat-autocomplete  #autocountryOfBirth="matAutocomplete" >
                                        <mat-option *ngFor="let item of filter_countryofbirth | async" [value]="item">
                                          {{item}}
                                        </mat-option>
                                </mat-autocomplete>
     
                         </mat-form-field>
                         </div>
                         <div class="col-md-2">
                            <mat-form-field class="example-full-width">
                                    <input type="text" (dblclick)="setupFilters()" [formControl]="nationalityControl" matInput placeholder="Nationality"  [matAutocomplete]="autonationality">
                                    <mat-autocomplete  #autonationality="matAutocomplete" >
                                            <mat-option *ngFor="let item of filter_nationality| async" [value]="item">
                                              {{item}}
                                            </mat-option>
                                    </mat-autocomplete>
                            </mat-form-field>
                        </div>
                        <div class="col-md-2">
                            <mat-form-field class="example-full-width">
                                    <input type="text" (dblclick)="setupFilters()" [formControl]="familystatusControl" matInput placeholder="Family Status" [matAutocomplete]="autofamilyStatus">
                                    <mat-autocomplete  #autofamilyStatus="matAutocomplete" >
                                            <mat-option *ngFor="let item of filter_familystatus| async" [value]="item">
                                              {{item}}
                                            </mat-option>
                                    </mat-autocomplete>
                            </mat-form-field>
                        </div>
                        <div class="col-md-2" style="margin-top : 0px;">
                             
                                <div align = "center">
                                         <div class="mat-form-field" style="color:#4caf50" > Following Partner </div>  
                                         <mat-slide-toggle [formControl]="followingPartnerControl" labelPosition="before" [checked]="employee.followingPartner"></mat-slide-toggle>
                                </div>
                            <!-- <mat-checkbox [formControl]="followingPartnerControl"  labelPosition="before" [checked]="employee.followingPartner">Following Partner</mat-checkbox> -->
                        </div>
             </div>

             <div class="row" style="margin-top: 10px">



             </div>

             <div class="row" style="margin-top: 10px">

                    <div class="col-md-2">
                        <mat-form-field class="example-full-width">
                          <input matInput autocomplete="off" [formControl]="followingChildrenControl"  placeholder="Following Children" type="number" >
                        </mat-form-field>
                    </div>
                    <div class="col-md-2">
                        <mat-form-field class="example-full-width">
                                <input type="text" [formControl]="spousenationalityControl" matInput placeholder="Spouse Nationality" [matAutocomplete]="autospouseNationality">
                                <mat-autocomplete  #autospouseNationality="matAutocomplete" >
                                        <mat-option *ngFor="let item of filter_spousenationality | async" [value]="item">
                                          {{item}}
                                        </mat-option>
                                </mat-autocomplete>
                        </mat-form-field>
                    </div>
                    <div class="col-md-2">
                        <mat-form-field class="example-full-width">
                                <input type="text" (dblclick)="setupFilters()" [formControl]="typeofvisaControl" matInput placeholder="Type of Visa" [matAutocomplete]="autotypeOfVisa">
                                <mat-autocomplete  #autotypeOfVisa="matAutocomplete" >
                                        <mat-option *ngFor="let item of filter_typeofvisa | async" [value]="item">
                                          {{item}}
                                        </mat-option>
                                </mat-autocomplete>
                      </mat-form-field>
                      </div>
                      <div class="col-md-3">
                        <mat-form-field class="example-full-width">
                            <input matInput autocomplete="off" [formControl]="visaExpiryDateControl"  [matDatepicker]="myDatepicker3"
                            placeholder="Visa Expiry Date">
                
                        <mat-datepicker-toggle matSuffix
                                               [for]="myDatepicker3">
                
                        </mat-datepicker-toggle>
                
                        <mat-datepicker #myDatepicker3></mat-datepicker>

                        </mat-form-field>
                    </div>


                    <div class="col-md-3">
                        <mat-form-field class="example-full-width">
                          <input matInput autocomplete="off" [formControl]="emailControl" placeholder="Email Address" type="email">
                        </mat-form-field>
                    </div>
             </div>

             <div class="row" style="margin-top: 10px">
                    <div class="col-md-12">
                            <mat-form-field class="example-full-width">
                                    <input type="text" (dblclick)="setupFilters()" [formControl]="activitystatusControl" matInput placeholder="Activity Status" [matAutocomplete]="autoactivityStatus">
                                    <mat-autocomplete  #autoactivityStatus="matAutocomplete" >
                                            <mat-option *ngFor="let item of filter_activitystatus | async" [value]="item">
                                              {{item}}
                                            </mat-option>
                                    </mat-autocomplete>        
                            </mat-form-field>
                     </div>
             </div>

             <div *ngIf="!CreateMode" class="row" style="margin-top: 0px">
                        <div class="col-md-12">
                                      <button  matTooltip="Delete this record forever!" class="btn-delete"  type="submit" (click)="this.confirmDelete()">
                                               Delete This Employee 
                                       </button>
                         </div>
            </div>



        <!-- <button mat-raised-button type="submit" class="btn btn-danger pull-right">Update Employee</button>

        <button mat-raised-button class="btn btn-default pull-right" (click)="close()"> Close </button> -->
       
   
</mat-dialog-content>

<mat-dialog-actions align="end">
    <button  matDialogClose  (keydown.enter)="$event.preventDefault()"  mat-raised-button class="btn btn-default" [disabled]="isSubmit" (click)="close()"> Close </button>
    <button  type="submit" [hidden]="CreateMode"   mat-raised-button class="btn btn-primary" [disabled]="isSubmit" (click)="save()" >Update Employee</button>
    <button  type="submit" [hidden]="!CreateMode"  mat-raised-button class="btn btn-danger" [disabled]="isSubmit" (click)="createNew()">Create New Employee</button>
</mat-dialog-actions>

<!-- <div align ="center" *ngIf="isSubmit" class="jqbox_innerhtml">
        <mat-spinner  color="warn" diameter="100"></mat-spinner>
</div> -->

</form>